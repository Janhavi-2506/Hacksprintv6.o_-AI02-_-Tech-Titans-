<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Analysis Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container results-container">
        <header>
            <h1>Your Resume Analysis Results</h1>
            <a href="/" class="back-btn">Analyze Another Resume</a>
        </header>
        
        <div class="results-grid">
            <!-- Main Scores Section -->
            <div class="score-card health-score">
                <h2>Resume Health Score</h2>
                <div class="score-circle" data-score="{{ analysis.health_score }}">
                    <span>{{ analysis.health_score }}</span>
                </div>
                <div class="score-feedback">
                    {% if analysis.health_score >= 80 %}
                        <p>Excellent! Your resume is well-structured and ATS-friendly.</p>
                    {% elif analysis.health_score >= 60 %}
                        <p>Good, but there's room for improvement.</p>
                    {% else %}
                        <p>Needs work. Consider the suggestions below.</p>
                    {% endif %}
                </div>
            </div>
            
            {% if analysis.match_score > 0 %}
            <div class="score-card match-score">
                <h2>Job Match Score</h2>
                <div class="score-circle" data-score="{{ analysis.match_score }}">
                    <span>{{ analysis.match_score|round|int }}</span>
                </div>
                <div class="score-feedback">
                    {% if analysis.match_score >= 80 %}
                        <p>Strong match for this position!</p>
                    {% elif analysis.match_score >= 50 %}
                        <p>Moderate match. Consider the suggestions below.</p>
                    {% else %}
                        <p>Weak match. Significant improvements needed.</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            
            <!-- Improvement Suggestions -->
            <div class="suggestions-card">
                <h2>Improvement Suggestions</h2>
                <ul>
                    {% for suggestion in analysis.improvement_suggestions %}
                        <li>{{ suggestion }}</li>
                    {% endfor %}
                    
                    {% if not analysis.improvement_suggestions %}
                        <li>No major improvements needed. Great job!</li>
                    {% endif %}
                </ul>
                
                <div class="one-click-section">
                    <h3>One-Click Enhancements</h3>
                    <button class="enhance-btn">Optimize for ATS</button>
                    <button class="enhance-btn">Add Quantifiable Metrics</button>
                    <button class="enhance-btn">Improve Readability</button>
                </div>
            </div>
            
            <!-- Bias Detection -->
            <div class="analysis-card {% if analysis.bias_detection.bias_found %}warning{% else %}success{% endif %}">
                <h2>Bias Detection</h2>
                {% if analysis.bias_detection.bias_found %}
                    <div class="warning-message">
                        <h3>⚠️ Potential Bias Found</h3>
                        <ul>
                            {% for message in analysis.bias_detection.bias_messages %}
                                <li>{{ message }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% else %}
                    <div class="success-message">
                        <h3>✅ No Significant Bias Detected</h3>
                        <p>Your resume uses inclusive language.</p>
                    </div>
                {% endif %}
                
                <div class="diversity-section">
                    <h3>Diversity Boost</h3>
                    <button class="diversity-btn">Anonymize Resume</button>
                    <p>Remove name, gender, and age indicators for fair screening</p>
                </div>
            </div>
            
            <!-- Fraud Detection -->
            <div class="analysis-card {% if analysis.fraud_detection.fraud_risk %}warning{% else %}success{% endif %}">
                <h2>Fraud Detection</h2>
                {% if analysis.fraud_detection.fraud_risk %}
                    <div class="warning-message">
                        <h3>⚠️ Potential Red Flags (Score: {{ analysis.fraud_detection.fraud_score }}/100)</h3>
                        <ul>
                            {% for message in analysis.fraud_detection.fraud_messages %}
                                <li>{{ message }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% else %}
                    <div class="success-message">
                        <h3>✅ No Fraud Indicators Detected</h3>
                        <p>Your resume appears authentic and verifiable.</p>
                    </div>
                {% endif %}
            </div>
            
            <!-- Personality Insights -->
            <div class="analysis-card personality-card">
                <h2>Personality & Culture Fit</h2>
                <div class="traits-container">
                    <div class="trait">
                        <h3>Leadership</h3>
                        <div class="trait-bar" style="--score: {{ analysis.personality.leadership }}%">
                            <div class="bar-fill"></div>
                            <span>{{ analysis.personality.leadership }}%</span>
                        </div>
                    </div>
                    <div class="trait">
                        <h3>Teamwork</h3>
                        <div class="trait-bar" style="--score: {{ analysis.personality.teamwork }}%">
                            <div class="bar-fill"></div>
                            <span>{{ analysis.personality.teamwork }}%</span>
                        </div>
                    </div>
                    <div class="trait">
                        <h3>Creativity</h3>
                        <div class="trait-bar" style="--score: {{ analysis.personality.creativity }}%">
                            <div class="bar-fill"></div>
                            <span>{{ analysis.personality.creativity }}%</span>
                        </div>
                    </div>
                </div>
                
                <div class="culture-fit">
                    <h3>Culture Fit Suggestions</h3>
                    <p>Based on your resume, you might thrive in environments that value:</p>
                    <ul>
                        {% if analysis.personality.leadership > 70 %}
                            <li>Leadership opportunities</li>
                        {% endif %}
                        {% if analysis.personality.teamwork > 70 %}
                            <li>Collaborative team settings</li>
                        {% endif %}
                        {% if analysis.personality.creativity > 70 %}
                            <li>Innovative and creative workplaces</li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Animate score circles
        document.addEventListener('DOMContentLoaded', function() {
            const scoreCircles = document.querySelectorAll('.score-circle');
            
            scoreCircles.forEach(circle => {
                const score = parseInt(circle.getAttribute('data-score'));
                const fill = circle.querySelector('.bar-fill') || circle;
                
                // Set color based on score
                if (score >= 80) {
                    circle.style.setProperty('--score-color', '#2ecc71'); // Green
                } else if (score >= 50) {
                    circle.style.setProperty('--score-color', '#f39c12'); // Orange
                } else {
                    circle.style.setProperty('--score-color', '#e74c3c'); // Red
                }
                
                // Animate the fill (for bar charts)
                if (fill.classList.contains('bar-fill')) {
                    fill.style.width = `${score}%`;
                }
            });
        });
    </script>
</body>
</html>
